# Точки притяжения

Точки притяжения можно использовать для экспериментов с геометрическими узорами. Их можно применять для постепенного изменения объектов на основании расстояния.

В ходе данного рабочего процесса вы получите следующие навыки:

* создание, редактирование списков и управление ими;
* перемещение точек в окне 3D-просмотра с помощью непосредственной манипуляции;
* изменение режима выполнения.

![](../images/10-1/2/attractor1.gif)

## Определение целей

В рамках этого упражнения требуется создать окружность (_цель_), в которой входные значения радиуса определяются расстоянием до ближайшей точки (_связь_).

![Нарисованный от руки эскиз окружности](../images/10-1/2/00-Hand-Sketch-of-Circle.png)

> Точка, определяющая отношение на основе расстояния, обычно называется точкой притяжения. В данном случае расстояние до точки притяжения будет использоваться для определения размера окружности.

## Дальнейшие действия

> Скачайте файл примера, щелкнув указанную ниже ссылку.
>
> Полный список файлов примеров можно найти в приложении.

{% file src="../datasets/10-1/2/DynamoSampleWorkflow-Attractors.dyn" %}

Наметив цели и связи, можно приступать к созданию графика. Необходимо выбрать узлы, которые будут представлять последовательность действий, выполняемых приложением Dynamo. Сначала добавьте следующие узлы: **Number**, **Number Slider**, **Point.ByCoordinates**, **Geometry.DistanceTo, Circle.ByCenterPointRadius.**

![](../images/10-1/2/attractor(2).png)

> 1. Input > Basic > **Number**
> 2. Input > Basic > **Number Slider**
> 3. Geometry > Points > Point > **By Coordinates(x,y,z)**
> 4. Geometry > Modifiers > Geometry > **DistanceTo**
> 5. Geometry > Curves > Circle > **ByCenterPointRadius**

### Соединение узлов с помощью проводов

Разместив узлы, необходимо соединить их порты с помощью проводов. Эти соединения будут определять поток данных.

![](../images/10-1/2/attractor(3).png)

> 1. От узла **Number** к узлу **Point.ByCoordinates**
> 2. От узла **Number Sliders** к узлу **Point.ByCoordinates**
> 3. От узла **Point.ByCoordinates** (2) к узлу **DistanceTo**
> 4. От узлов **Point.ByCoordinates** и **DistanceTo** к узлу **Circle.ByCenterPointRadius**

### Выполнение программы

После того как мы определили последовательность потока данных, нам остается только дать Dynamo команду на выполнение программы. После выполнения программы (автоматически или путем нажатия кнопки «Выполнить в ручном режиме») передача данных будет осуществляться по проводам, а результаты появятся в области 3D-просмотра.

![](../images/10-1/2/attractor(4).png)

> 1. Нажмите «Выполнить». Если на панели выполнения задан ручной режим, необходимо нажать кнопку «Выполнить», чтобы запустить выполнение графика.
> 2. Просмотр узла: при наведении указателя на поле в правом нижнем углу узла появится всплывающее окно результатов.
> 3. 3D-просмотр: если какой-либо узел создает геометрию, то она будет отображаться в области 3D-просмотра.
> 4. Геометрия вывода в узле создания.

### Добавление узла **Code Block**

Если программа работает правильно, то в области 3D-просмотра должна появиться окружность, проходящая через точку притяжения. Теперь можно добавить дополнительные подробности или элементы управления. Настройте входные данные для узла окружности, чтобы было можно регулировать их влияние на радиус. Добавьте еще один узел **Number Slider** в рабочую область, а затем дважды щелкните в пустой области рабочего пространства, чтобы добавить узел **Code Block**. Отредактируйте поле в узле Code Block, указав значения `X/Y`.

![](../images/10-1/2/attractor(5).png)

> 1. **Code Block**
> 2. От узлов **DistanceTo** и **Number Slider** к узлу **Code Block**
> 3. От узла **Code Block** к узлу **Circle.ByCenterPointRadius**

### Использование последовательностей

Чтобы процесс пошаговой разработки программы был эффективен, рекомендуется начинать с простой структуры, которую затем можно постепенно усложнять. Если программа позволяет успешно создавать одну окружность, то ее можно усложнить и использовать для создания сразу нескольких окружностей. Для этого вместо одной центральной точки можно задать сетку точек, данные из которой будут использоваться в итоговой структуре. В результате каждая из полученных окружностей будет иметь уникальное значение радиуса, определяемое калибруемым расстоянием до точки притяжения.

![](../images/10-1/2/attractor(6).png)

> 1. Добавьте узел **Number Sequence** и замените входные данные узла **Point.ByCoordinates**. Щелкните правой кнопкой мыши узел Point.ByCoordinates и выберите «Переплетение» > «Перекрестная ссылка».
> 2. Добавьте узел **Flatten** после узла Point.ByCoordinates. Чтобы выровнять список полностью, оставьте для входа `amt` значение по умолчанию (`-1`).
> 3. Область 3D-просмотра обновляется, и в ней появляется сетка окружностей.

### Настройка с помощью непосредственных манипуляций

Манипуляции с числами не всегда являются оптимальным подходом. Теперь геометрию точки можно корректировать вручную при навигации по области фонового 3D-просмотра. Также можно управлять другой геометрией, построенной на основе точки. Например, узел **Sphere.ByCenterPointRadius** также поддерживает режим непосредственного манипулирования. Для управления положением точки можно задать наборы значений X, Y и Z с помощью узла **Point.ByCoordinates**. Однако с помощью метода непосредственного манипулирования можно обновлять значения регуляторов путем перемещения точки вручную в режиме **навигации по области 3D-просмотра**. Это обеспечивает более интуитивный способ управления набором отдельных значений, которые определяют положение точки.

![](../images/10-1/2/attractor(7).png)

> 1. Для использования метода **Непосредственное манипулирование** выберите панель точки для перемещения. Над выбранной точкой появятся стрелки.
> 2. Переключитесь в режим **Навигация по области 3D-просмотра.**

![](../images/10-1/2/attractor\(8\).png)

> 1. Наведите курсор на точку. Появятся оси X, Y и Z.
> 2. Чтобы переместить соответствующую ось, щелкните и перетащите цветную стрелку. При перемещении точки вручную значения в узле **Number Slider** динамически обновляются.

![](../images/10-1/2/attractor(1).png)

> 1. Обратите внимание, что до перехода в режим **Непосредственное манипулирование** с компонентом **Point.ByCoordinates** был соединен только один регулятор. При перемещении точки вручную в направлении по оси X автоматически создается новый узел **Number Slider** для указания входных данных по оси X.

