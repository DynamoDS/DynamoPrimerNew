# Узлы и провода

## Узлы

**Узлы** Dynamo — это объекты, путем соединения которых создается визуальная программа. Каждый **узел** выполняет ту или иную операцию. Это может быть как простая операция, например хранение числа, так и более сложная, например создание или запрос геометрического объекта.

### Структура узла

Большинство узлов Dynamo состоит из пяти частей. За некоторыми исключениями (например, входные узлы) в большинстве своем узлы устроены следующим образом.

![](<images/nodes and wires - nodes anatomy.jpg>)

> 1. Имя: имя узла, составленное по шаблону `Category.Name`.
> 2. Основная часть узла: если щелкнуть ее правой кнопкой мыши, отобразятся параметры, действующие на уровне узла.
> 3. Порты (ввода и вывода): разъемы для проводов, передающих входные данные для узла, а также результаты выполненной узлом операции.
> 4. Значение по умолчанию: щелкните порт ввода правой кнопкой мыши. Для некоторых узлов заданы значения по умолчанию, которые можно использовать или игнорировать.
> 5. Значок переплетения: значение [параметра «Переплетение»](../5\_essential\_nodes\_and\_concepts/5-4\_designing-with-lists/1-whats-a-list.md#lacing), заданное для совпадающих входных данных списка (подробные сведения см. далее).

### Порты ввода/вывода узлов

Порты — это вводы и выводы узлов, играющие роль разъемов для проводов. В порты, расположенные слева, поступают входящие данные, а из портов, расположенных справа, передаются далее результаты выполненной операции.

Каждый порт рассчитан на прием данных определенного типа. Если соединить с портами узла Point.ByCoordinates число, например _2.75_, то операция выполнится успешно и будет создана точка. Но если вместо числа соединить с тем же портом текстовое значение, например _Red_, это приведет к ошибке.

{% hint style="info" %}Совет. Наведите указатель на порт, чтобы увидеть подсказку о требуемом типе данных. {% endhint %}

![](<images/nodes and wires - nodes input and tooltip.jpg>)

> 1. Метка порта
> 2. Подсказка
> 3. Тип данных
> 4. Значение по умолчанию

### Состояния узла

Для демонстрации состояния выполнения операций в узлах визуальной программы в Dynamo используются разные цвета. Иерархия состояний определяется следующим образом: ошибка > предупреждение > информация > просмотр.

Если навести указатель на имя узла или его порты либо щелкнуть их правой кнопкой мыши, можно просмотреть дополнительные сведения и параметры.

![](<../.gitbook/assets/nodes and wires - node states.png>)

> 1. Соответствующие входные данные: если над входными портами узла отображаются синие вертикальные полосы, это значит, что узел правильно подключен и в него поступают входные данные нужного типа.
> 2. Несоответствующие входные данные: если над одним или несколькими входными портами узла отображается красная вертикальная полоса, нужно подключить эти порты так, чтобы в них поступали входные данные нужного типа.
> 3. Функция: это узел, выводом которого является функция и порт вывода которого помечен серой вертикальной полосой.
> 4. Выбранный: выбранные узлы выделяются голубой рамкой по периметру.
> 5. Замороженный: замороженными являются полупрозрачные синие узлы, и выполнение операций таких узлов приостановлено.
> 6. Просмотр откл.: серый цвет строки состояния под узлом и значок глаза <img src="images/nodes and wires - preview off.jpg" alt="" data-size="line"> указывают на то, что просмотр геометрии для этого узла отключен.
> 7. Предупреждение: желтый цвет строки состояния под узлом указывает на состояние предупреждения. Это значит, что в узле отсутствуют входные данные либо используются неверные типы данных.
> 8. Ошибка: красный цвет строки состояния под узлом указывает на то, что в узле произошла ошибка.
> 9. Сведения: синий цвет строки состояния под узлом указывает на информационное состояние, которое обозначает наличие полезных сведений об узлах. Переход к этому состоянию может быть вызван значением, близким к максимальному значению, поддерживаемому узлом, либо таким использованием узла, при котором может пострадать производительность, и т. д.

#### Обработка узлов с ошибками и предупреждениями

Если визуальная программа содержит предупреждения или ошибки, то Dynamo предоставляет подробную информацию о проблеме. Над именем каждого желтого узла отображается подсказка. Наведите указатель на значок предупреждения ![](<images/nodes and wires - node warning icon.png>) или ошибки ![](<images/nodes and wires - node error icon.png>), чтобы узнать подробности.

{% hint style="info" %} Совет. Используя информацию из подсказки, проверьте узлы, предшествующие текущему, на наличие ошибок в типе или структуре требуемых данных. {% endhint %}

![](<images/nodes and wires - nodes with warning tooltip.jpg>)

> 1. Подсказка с предупреждением: не указанные данные или значение Null не могут использоваться как данные типа Double, например число.
> 2. Используйте узел Watch, чтобы просмотреть входные данные.
> 3. Узел Number, предшествующий текущему, передает на выходе текстовое значение Red, а не число.

## Провода

Провода соединяют друг с другом узлы, создавая тем самым связи и обеспечивая поток выполнения операций в рамках визуальной программы. Их можно воспринимать как настоящие электрические провода, передающие заряды (данные) от одного объекта к другому.

### Поток выполнения операций в программе <a href="#program-flow" id="program-flow"></a>

Каждый провод соединяет порт вывода одного узла с портом ввода другого. Такой порядок подключения определяет направление **потока данных** в визуальной программе.

Порты ввода находятся слева, а порты вывода — справа, поэтому можно сказать, что поток выполнения операций в программе направлен слева направо.

![](<images/nodes and wires - flow of data.jpg>)

### Создание проводов <a href="#creating-wires" id="creating-wires"></a>

Для создания провода нужно щелкнуть сначала порт одного узла, а затем порт другого узла, чтобы установить соединение. В процессе создания соединения провод отображается пунктирной линией, после чего становится сплошным.

Данные всегда проходят по проводам в направлении от вывода к вводу, однако последовательность выбора соединяемых портов не играет роли и может быть любой.

![](<images/nodes and wires - creating a wire.gif>)

### Редактирование проводов <a href="#editing-wires" id="editing-wires"></a>

Зачастую при работе над визуальной программой возникает необходимость в корректировке потока выполнения операций путем редактирования проводов, играющих роль соединительных элементов. Чтобы отредактировать провод, щелкните порт ввода подсоединенного узла. Далее выберите один из двух вариантов:

* Чтобы изменить подключение к порту ввода, щелкните другой порт ввода.

![](<images/nodes and wires - edit wire change port (2).gif>)

* Чтобы удалить провод, перетащите его в сторону, а затем щелкните в рабочем пространстве.

![](<images/nodes and wires - edit wires remove.gif>)

* Чтобы повторно соединить несколько проводов, щелкните нужные элементы, нажав и удерживая клавишу SHIFT.

![](<images/nodes and wires - edit multi ports.gif>)

* Чтобы скопировать провод, щелкните нужный элемент, нажав и удерживая клавишу CTRL.

![](<images/nodes and wires - duplicate wire.gif>)

#### Провода по умолчанию и выделенные провода <a href="#wire-previews" id="wire-previews"></a>

По умолчанию провода отображаются при просмотре как серые прерывистые линии. При выборе узла все подключенные к нему провода выделяются голубым цветом, как и сам узел.

![](<images/nodes and wires - default vs highlighted wires.jpg>)

> 1. Выделенный провод
> 2. Провод по умолчанию

**Скрытие проводов по умолчанию**

Если требуется скрыть провода на графике, снимите флажок «Показать соединители» в меню «Просмотреть» > «Соединители».

При такой настройке только выбранные узлы и соединенные с ними провода будут отображаться бледно-голубым цветом.

![](<images/nodes and wires - hide wires setting (1).gif>)

#### Скрытие отдельных проводов

Чтобы скрыть выбранный провод, щелкните правой кнопкой мыши вывод узла и выберите «Скрыть провода».

![](<images/nodes and wires - hide selected wire.gif>)
