# Узлы и провода

## Узлы

**Узлы** Dynamo — это объекты, путем соединения которых создается визуальная программа. Каждый **узел** выполняет ту или иную операцию. Это может быть как простая операция, например хранение числа, так и более сложная, например создание или запрос геометрического объекта.

### Структура узла

Большинство узлов Dynamo состоит из пяти частей. За некоторыми исключениями (например, входные узлы) узлы в большинстве своем устроены следующим образом.

![](<images/nodes and wires - nodes anatomy.jpg>)

> 1. Имя: имя узла, составленное по шаблону `Category.Name`.
> 2. Основная часть узла: если щелкнуть ее правой кнопкой мыши, отобразятся параметры, действующие на уровне узла.
> 3. Порты (ввода и вывода): разъемы для проводов, передающих входные данные для узла, а также результаты выполненной узлом операции.
> 4. Значение по умолчанию: щелкните порт ввода правой кнопкой мыши. Для некоторых узлов заданы значения по умолчанию, которые можно использовать или игнорировать.
> 5. Значок переплетения: значение [параметра «Переплетение»](../5\_essential\_nodes\_and\_concepts/5-4\_designing-with-lists/1-whats-a-list.md#lacing), заданное для совпадающих входных данных списка (подробные сведения см. далее).

### Порты ввода/вывода узлов

Порты — это вводы и выводы узлов, играющие роль разъемов для проводов. В порты, расположенные слева, поступают входящие данные, а из портов, расположенных справа, передаются далее результаты выполненной операции.

Каждый порт рассчитан на прием данных определенного типа. Если соединить с портами узла Point.ByCoordinates число, например _2.75_, то операция выполнится успешно и будет создана точка. Но если вместо числа соединить с тем же портом, например, текстовое значение _Red_, это приведет к ошибке.

{% hint style="info" %}
Совет. Наведите указатель на порт, чтобы увидеть подсказку о требуемом типе данных.
{% endhint %}

![](<images/nodes and wires - nodes input and tooltip.jpg>)

> 1. Метка порта
> 2. Подсказка
> 3. Тип данных
> 4. Значение по умолчанию

### Состояния узла

Для демонстрации состояния выполнения операций в узлах визуальной программы в Dynamo используются разные цвета. Иерархия состояний определяется следующим образом: ошибка > предупреждение > информация > просмотр.

Кроме того, наведя указатель на имя узла или его порты либо щелкнув их правой кнопкой мыши, можно просмотреть дополнительные сведения и параметры.

![](<images/nodes and wires - node states.jpg>)

> 1. Активный: если узлы правильно подключены и в них поступают входные данные нужного типа, то их имя отображается на темно-сером фоне.
> 2. Ошибка: красный цвет строки состояния под узлом указывает на то, что произошла ошибка узла.
> 3. Замороженный: если узел заморожен, выполнение его операции приостанавливается, и он становится прозрачным.
> 4. Фоновый просмотр: серый цвет строки состояния под узлом и значок глаза ![](<images/nodes and wires - preview off.jpg>) указывают на то, что предварительный просмотр геометрии отключен.
> 5. Выбранный: выбранный узел выделяется голубой рамкой.
> 6. Предупреждение: желтый цвет строки состояния под узлом указывает на состояние предупреждения, то есть отсутствуют входные данные или могут быть неверные типы данных.

#### Обработка ошибок и предупреждений узлов

Если визуальная программа содержит предупреждения или ошибки, то Dynamo предоставляет подробную информацию о проблеме. Над именем каждого желтого узла отображается подсказка. Наведите указатель на значок предупреждения ![](<images/nodes and wires - node warning icon.png>) или ошибки ![](<images/nodes and wires - node error icon.png>), чтобы посмотреть подробности.

{% hint style="info" %}
Совет. Используя информацию из подсказки, проверьте узлы, предшествующие текущему, на наличие ошибок в типе или структуре требуемых данных.
{% endhint %}

![](<images/nodes and wires - nodes with warning tooltip.jpg>)

> 1. Подсказка с предупреждением: не заданные данные или значение Null не могут использоваться как данные типа Double, например число.
> 2. Используйте узел Watch, чтобы просмотреть входные данные.
> 3. Узел Number, предшествующий текущему, передает на выходе текстовое значение Red, а не число.

## Провода

Провода соединяют друг с другом узлы, создавая тем самым связи и обеспечивая поток выполнения операций в рамках визуальной программы. Их можно воспринимать как настоящие электрические провода, передающие заряды (данные) от одного объекта к другому.

### Поток выполнения операций в программе <a href="#program-flow" id="program-flow"></a>

Каждый порт соединяет порт вывода одного узла с портом ввода другого. Такой порядок подключения определяет направление **потока данных** в визуальной программе.

Порты ввода находятся на левой стороне, а порты вывода — на правой, поэтому можно сказать, что поток выполнения программы происходит слева направо.

![](<images/nodes and wires - flow of data.jpg>)

### Создание проводов <a href="#creating-wires" id="creating-wires"></a>

Создайте провод, последовательно щелкнув левой кнопкой мыши исходный порт и порт другого узла для создания соединения. В процессе создания соединения провод отображается пунктирной линией, после чего становится сплошным.

Данные всегда проходят по проводам в направлении от вывода к вводу, однако провод можно создавать в любом направлении в последовательности щелчков соединенных портов.

![](<images/nodes and wires - creating a wire.gif>)

### Редактирование проводов <a href="#editing-wires" id="editing-wires"></a>

Зачастую при работе над визуальной программой возникает необходимость в корректировке потока выполнения операций путем редактирования проводов, играющих роль соединительных элементов. Чтобы отредактировать провод, щелкните порт ввода подсоединенного узла. Далее выберите один из двух вариантов:

* Чтобы изменить подключение к порту ввода, щелкните другой порт ввода.

![](<images/nodes and wires - edit wire change port (2).gif>)

* Чтобы удалить провод, перетащите его в сторону и щелкните в рабочем пространстве.

![](<images/nodes and wires - edit wires remove.gif>)

* Чтобы повторно соединить несколько проводов, щелкните левой кнопкой мыши, нажав и удерживая клавишу SHIFT.

![](<images/nodes and wires - edit multi ports.gif>)

* Чтобы скопировать провод, щелкните левой кнопкой мыши, нажав и удерживая клавишу CTRL.

![](<images/nodes and wires - duplicate wire.gif>)

#### Провода по умолчанию и выделенные провода <a href="#wire-previews" id="wire-previews"></a>

По умолчанию провода отображаются в режиме предварительного просмотра как серые прерывистые линии. При выборе узла все подключенные к нему провода выделяются тем же синим цветом, что и узел.

![](<images/nodes and wires - default vs highlighted wires.jpg>)

> 1. Выделенный провод
> 2. Провод по умолчанию

**Скрытие проводов по умолчанию**

Если требуется скрыть провода на графике, это можно сделать, сняв флажок «Показать соединители» в меню «Просмотреть» > «Соединители».

При такой настройке только выбранные узлы и соединенные с ними провода будут отображаться бледно-голубым цветом.

![](<images/nodes and wires - hide wires setting (1).gif>)

#### Скрытие отдельных проводов

Чтобы скрыть выбранный провод, щелкните правой кнопкой мыши выходной параметр узла и выберите «Скрыть провода».

![](<images/nodes and wires - hide selected wire.gif>)
