# Данные

Данные — это содержимое программы. Они передаются по проводам, предоставляя входные значения узлам, в которых затем обрабатываются и преобразуются в выходные данные новой формы. Давайте рассмотрим определение данных и их структуру, а затем начнем работу с данными в Dynamo.

## Что такое данные?

Данные — это набор значений количественных и качественных переменных. Самая простая форма данных — это числа, например `0`, `3.14` и `17`. Однако существуют и другие типы данных: переменные, представляющие меняющиеся числа (`height`); символы (`myName`); геометрические объекты (`Circle`); список элементов данных (`1,2,3,5,8,13,...`).

В Dynamo данные добавляются (или передаются) в порты ввода узлов. Данные могут существовать без действий, однако они необходимы для обработки действий, которые представлены в форме узлов. Если узел добавлен в рабочее пространство, но не имеет входных данных, результатом будет функция, а не результат самого действия.

![Data and Actions](<../images/5-3/1/data - what is data.jpg>)

> 1. Простые данные
> 2. Данные и действие (узел), которое успешно выполняется.
> 3. Действие (узел) без входных данных возвращает типовую функцию.

### Null — отсутствие данных

Остерегайтесь значений null. Тип `'null'` указывает на отсутствие данных. Это абстрактное понятие, с которым можно, тем не менее, столкнуться при визуальном программировании. Если результат действия недопустим, узел возвращает нулевой объект.

Проверка наличия нулевых объектов и их удаление из структуры данных крайне важны для создания надежных программ.

| Значок | Имя/синтаксис | Входные данные | Выходные данные |
| ----------------------------------------------------- | ------------- | ------ | ------- |
| ![](<../images/5-3/1/data - object IsNull.jpg>) | Object.IsNull | obj | bool |

### Структуры данных

При визуальном программировании можно очень быстро генерировать большие объемы данных, поэтому необходимы средства для управления их иерархией. Эту роль выполняют структуры данных — организационные схемы, в которых хранятся данные. Особенности структур данных и их использования зависят от языка программирования.

В Dynamo для построения иерархии данных используются списки. Они будут подробнее рассмотрены в следующих главах, пока же приведем только общие сведения.

Список — это набор элементов, размещенных в одной структуре данных:

* У меня пять пальцев (_элементы_) на руке (_список_).
* На моей улице (_список_) десять домов (_элементы_).

![List Breakdown](<../images/5-3/1/data - data structures.jpg>)

> 1. Узел **Number Sequence** определяет список чисел на основе входных данных _start_, _amount_ и _step_. С помощью этих узлов было создано два отдельных списка из десяти чисел, один из которых охватывает диапазон _100–109_, а другой — _0–9_.
> 2. Узел **List.GetItemAtIndex** позволяет выбрать элемент в списке по определенному индексу. При выборе значения _0_ будет получен первый элемент в списке (в данном случае — _100_).
> 3. Та же процедура применительно ко второму списку дает значение _0_ — первый элемент в списке.
> 4. Объединим оба списка в один с помощью узла **List.Create**. Обратите внимание, что узел создает _список списков._ Это меняет структуру данных.
> 5. При повторном использовании узла **List.GetItemAtIndex** с индексом _0_ получаем первый список в списке списков. Это означает, что список рассматривается как элемент, в чем и состоит отличие от других языков программирования. В последующих главах операции со списками и структуры данных будут рассмотрены подробнее.

Главное, что следует помнить об иерархии данных в Dynamo — **в случае со структурой данных списки рассматриваются как элементы.** Другими словами, в Dynamo структура данных рассматривается сверху вниз. Что это означает? Рассмотрим пример.

## Упражнение «Использование данных для создания цепочки цилиндров»

> Скачайте файл примера, щелкнув указанную ниже ссылку.
>
> Полный список файлов примеров можно найти в приложении.

{% file src="../datasets/5-3/1/Building Blocks of Programs - Data.dyn" %}

В первом примере создадим цилиндр с оболочкой, пройдя по ступеням геометрической иерархии, описанной в этом разделе.

### Часть I. Настройка графика для одного цилиндра с набором изменяемых параметров

1. Добавьте узел **Point.ByCoordinates**. После его добавления в рабочую область в начале координат сетки предварительного просмотра Dynamo появляется точка. Значения по умолчанию для выходных параметров _x,y_ и _z_ равны _0,0_. В этом месте и была создана точка.

![](<../images/5-3/1/data - exercise step 1.jpg>)

2\. **Plane.ByOriginNormal.** Следующий шаг в построении геометрической иерархии — плоскость. Существует несколько способов построения плоскости. В этом случае в качестве входных данных используется начало координат и нормаль. Начало координат — это узел-точка, созданный в предыдущем шаге.

**Vector.ZAxis.** Построение унифицированного вектора в направлении Z. Обратите внимание, что входные данные отсутствуют, а есть только вектор со значением \[0,0,1]. Он будет использоваться в качестве входных данных _нормали_ для узла **Plane.ByOriginNormal**. В результате получается прямоугольная плоскость в области предварительного просмотра Dynamo.

![](<../images/5-3/1/data - exercise step 2.jpg>)

3\. **Circle.ByPlaneRadius.** Продвигаясь вверх по иерархии, создадим кривую из плоскости, полученной в предыдущем шаге. После соединения с узлом получаем окружность в начале координат. По умолчанию радиус в узле имеет значение _1_.

![](<../images/5-3/1/data - exercise step 3.jpg>)

4\. **Curve.Extrude.** Теперь выполним выдавливание фигуры, задав глубину и двигаясь в третьем измерении. Этот узел создает поверхность из кривой путем выдавливания. По умолчанию расстояние в узле равно _1_, а на видовом экране должен отображаться цилиндр.

![](<../images/5-3/1/data - exercise step 4.jpg>)

5\. **Surface.Thicken.** Этот узел создает замкнутое тело путем смещения поверхности на заданное расстояние и замыкания формы. По умолчанию значение толщины равно _1_, а на видовом экране в соответствии с этими значениями отображается цилиндр с оболочкой.

![](<../images/5-3/1/data - exercise step 5.jpg>)

6\. **Number Slider.** Вместо использования в качестве значений по умолчанию для входных данных добавим в модель параметрические элементы управления.

**Редактирование области.** После добавления регулятора чисел в рабочую область щелкните значок в левом верхнем углу окна, чтобы отобразить параметры области.

**Min/Max/Step.** Задайте для _min_, _max_ и _step_ значения _0_,_2_ и _0.01_ соответственно. Это необходимо для управления размером всего геометрического объекта.

![](<../images/5-3/1/data - exercise step 6.gif>)

7\. **Регуляторы чисел.** Вместо входных значений по умолчанию скопируйте и вставьте этот регулятор чисел (выберите его, нажмите CTRL + C, затем CTRL + V), пока во всех входных параметрах со значениями по умолчанию не будут заданы регуляторы. Чтобы алгоритм действовал, некоторые значения регуляторов должны быть больше нуля (например, для увеличения толщины поверхности требуется глубина выдавливания).

![](<../images/5-3/1/data - exercise step 7a.gif>)

![](<../images/5-3/1/data - exercise step 7b.gif>)

8\. В итоге с помощью регуляторов создан параметрический цилиндр с оболочкой. Попробуйте изменить некоторые из параметров, наблюдая за динамическим обновлением геометрических объектов на видовом экране Dynamo.

![](<../images/5-3/1/data - exercise step 8a.gif>)

**Регуляторы чисел.** На следующем этапе мы добавили в рабочую область множество регуляторов, и теперь необходимо очистить интерфейс только что созданного инструмента. Щелкните один регулятор правой кнопкой мыши и выберите «Переименовать...». Замените имя каждого регулятора именем соответствующего параметра (толщина, радиус, высота и т. п.).

![](<../images/5-3/1/data - exercise step 8b step.jpg>)

### Часть II. Заполнение массива цилиндров из части I

9\. На данный момент создан цилиндр с толстыми стенками. Пока это только один объект. Теперь рассмотрим, как создать массив цилиндров, которые динамически связаны друг с другом. Для этого вместо одного объекта создадим список цилиндров.

**Добавление (+).** Наша цель — добавить ряд цилиндров возле уже имеющегося цилиндра. При вставке еще одного цилиндра рядом с текущим необходимо учитывать радиус цилиндра и толщину его оболочки. Это число можно получить, сложив два значения регуляторов.

![](<../images/5-3/1/data - exercise step 9.jpg>)

10\. Это более сложный шаг, поэтому рассмотрим его подробнее. Конечная цель — создать список чисел, определяющих местоположение каждого цилиндра в последовательности.

![](<../images/5-3/1/data - exercise step 10.jpg>)

> a. **Умножение**. Сначала умножим значение из предыдущего шага на 2. Это было значение радиуса, а цилиндр необходимо переместить на полный диаметр.
>
> b. **Number Sequence**. С помощью этого узла создайте массив чисел. Сначала вставим узел _умножения_ из предыдущего шага в качестве значения _step_. В качестве значения _start_ можно указать _0.0_, используя узел _number_.
>
> c. **Integer Slider**. Чтобы задать значение _amount_, присоедините регулятор целых чисел. Он будет определять количество создаваемых цилиндров.
>
> d. **Выходные данные**. В этом списке показано расстояние смещения каждого цилиндра в массиве, которое управляется параметрически с помощью первоначальных регуляторов.

11\. Этот шаг достаточно прост: соедините последовательность из предыдущего шага с входным параметром _x_ исходного узла **Point.ByCoordinates**. При этом регулятор _pointX_ будет заменен и его можно удалить. Теперь на видовом экране отображается массив цилиндров (убедитесь, что регулятор целых чисел имеет значение больше 0).

![](<../images/5-3/1/data - exercise step 11.gif>)

12\. Цепь цилиндров по-прежнему динамически связана со всеми регуляторами. Перемещайте регуляторы и вы увидите, как изменится картина.

![](<../images/5-3/1/data - exercise step 12.gif>)
